# =============================================================================
# Winux OS - Module Blacklist Configuration
# /etc/modprobe.d/winux-blacklist.conf
# =============================================================================
# Blacklist unnecessary or problematic kernel modules
# Based on Winux OS Specification v1.0
# =============================================================================

# =============================================================================
# DEPRECATED/LEGACY FILESYSTEMS
# =============================================================================
# These filesystems are rarely needed and can be security risks

blacklist cramfs
blacklist freevxfs
blacklist hfs
blacklist hfsplus
blacklist jffs2
blacklist squashfs
blacklist udf

# =============================================================================
# LEGACY NETWORK PROTOCOLS
# =============================================================================
# Disable deprecated/insecure network protocols

# Datagram Congestion Control Protocol
blacklist dccp

# Stream Control Transmission Protocol
blacklist sctp

# Reliable Datagram Sockets
blacklist rds

# Transparent Inter-Process Communication
blacklist tipc

# =============================================================================
# LEGACY/UNUSED HARDWARE DRIVERS
# =============================================================================

# Floppy disk driver (who uses floppy disks?)
blacklist floppy

# PC speaker (annoying beeps)
blacklist pcspkr
blacklist snd_pcsp

# =============================================================================
# FIREWIRE (IEEE 1394)
# =============================================================================
# FireWire can be used for DMA attacks - disable if not needed

blacklist firewire-core
blacklist firewire-ohci
blacklist firewire-sbp2
blacklist ohci1394
blacklist sbp2
blacklist dv1394
blacklist raw1394
blacklist video1394

# =============================================================================
# THUNDERBOLT (Optional Security)
# =============================================================================
# Uncomment to disable Thunderbolt (can be used for DMA attacks)
# Note: This will disable Thunderbolt docks and peripherals

# blacklist thunderbolt

# =============================================================================
# BLUETOOTH (Optional)
# =============================================================================
# Uncomment to disable Bluetooth if not needed

# blacklist bluetooth
# blacklist btusb
# blacklist btrtl
# blacklist btbcm
# blacklist btintel
# blacklist btmtk

# =============================================================================
# WEBCAM PRIVACY (Optional)
# =============================================================================
# Uncomment to disable webcam for privacy

# blacklist uvcvideo
# blacklist videobuf2_vmalloc
# blacklist videobuf2_memops
# blacklist videobuf2_v4l2
# blacklist videobuf2_common

# =============================================================================
# MICROPHONE PRIVACY (Optional)
# =============================================================================
# Uncomment to disable internal microphone
# Note: This may affect all audio recording

# blacklist snd_hda_intel

# =============================================================================
# WIRELESS (Optional)
# =============================================================================
# Uncomment to disable WiFi if only using ethernet

# blacklist iwlwifi
# blacklist iwlmvm
# blacklist cfg80211
# blacklist mac80211

# =============================================================================
# NVIDIA NOUVEAU (When using proprietary drivers)
# =============================================================================
# Blacklist open-source Nouveau driver when using NVIDIA proprietary

blacklist nouveau
blacklist lbm-nouveau
options nouveau modeset=0

# =============================================================================
# AMD RADEON (Legacy driver - use amdgpu instead)
# =============================================================================
# Blacklist old radeon driver in favor of amdgpu

blacklist radeon

# =============================================================================
# INTEL GRAPHICS POWER SAVING (Optional)
# =============================================================================
# Options for Intel graphics - uncomment to disable PSR if having issues

# options i915 enable_psr=0
# options i915 enable_fbc=0

# =============================================================================
# WATCHDOG TIMERS
# =============================================================================
# Disable watchdog timers for desktop use (reduces interrupts)

blacklist iTCO_wdt
blacklist iTCO_vendor_support
blacklist sp5100_tco
blacklist wdat_wdt

# =============================================================================
# MISCELLANEOUS UNUSED MODULES
# =============================================================================

# Apple file systems (not needed on non-Apple hardware)
blacklist apfs

# CD-ROM sound (legacy)
blacklist cdrom
blacklist sr_mod

# Industrial I/O (not needed for desktop)
blacklist industrialio

# ME Interface (Intel Management Engine - optional security)
# blacklist mei
# blacklist mei_me

# Intel Platform Monitoring Technology
blacklist intel_pmt_class
blacklist intel_pmt_telemetry
blacklist intel_pmt_crashlog

# =============================================================================
# VIRTUAL MACHINE GUESTS (Disable on bare metal)
# =============================================================================
# Uncomment these if running on bare metal, not in VM

# blacklist virtio_blk
# blacklist virtio_net
# blacklist virtio_pci
# blacklist virtio_ring
# blacklist virtio_scsi
# blacklist vmw_balloon
# blacklist vmw_pvscsi
# blacklist vmw_vmci
# blacklist vmwgfx
# blacklist hyperv_keyboard
# blacklist hv_balloon
# blacklist hv_utils
# blacklist hv_vmbus
# blacklist hv_storvsc
# blacklist hv_netvsc

# =============================================================================
# MODULE OPTIONS
# =============================================================================

# Disable USB autosuspend for gaming peripherals (prevents input lag)
options usbcore autosuspend=-1

# NVIDIA power management options
options nvidia NVreg_PreserveVideoMemoryAllocations=1
options nvidia NVreg_TemporaryFilePath=/var/tmp
options nvidia-drm modeset=1 fbdev=1

# AMD GPU options for gaming
options amdgpu ppfeaturemask=0xffffffff
options amdgpu gpu_recovery=1
options amdgpu deep_color=1
options amdgpu dc=1
options amdgpu dpm=1

# Intel graphics options
options i915 modeset=1
options i915 enable_guc=3
options i915 fastboot=1

# =============================================================================
# End of Winux OS Module Blacklist
# =============================================================================
